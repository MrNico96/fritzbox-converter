<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fritz-Box Converter</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚òéÔ∏è</text></svg>">
</head>
<body class="h-100">
<nav class="navbar navbar-expand-lg mb-3 navbar-light bg-light">
    <div class="collapse navbar-collapse justify-content-md-center">
        <ul class="navbar-nav">
            <li class="nav-item active">
                <div class="nav-link">
                    <button type="button" class="btn btn-primary btn-sm mr-1" onClick="convert_to_csv()">convert xml to csv</button>
                </div>
            </li>
            <li class="nav-item">
                <div class="nav-link">
                    <button type="button" class="btn btn-info btn-sm mr-1" onClick="convert_csv_to_xml()">convert csv to xml</button>
                </div>
            </li>
        </ul>
    </div>
</nav>
<main role="main" class="flex-shrink-0">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-12">
                <div class="shadow p-3 mb-5 bg-white border border-lightgrey rounded">
                    <div class="d-flex">
                        <div class="mr-auto h3">XML</div>
                        <div>
                            <button type="button" class="btn btn-outline-info btn-sm" onClick="download('xml')">
                                Download
                            </button>
                        </div>
                    </div>
                    <div class="dropdown-divider mt-2 mb-4"></div>
                    <div class="input-group mb-3">
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="file-input_xml"
                                   aria-describedby="inputGroupFileAddon01">
                            <label class="custom-file-label" for="file-input_xml">Choose XML file</label>
                        </div>
                    </div>
                    <div class="d-flex mb-2" style="align-items: center;">
                        <label class="switch mb-0">
                            <input type="checkbox" checked id="xml_editor_switch">
                            <span class="slider round"></span>
                        </label>
                        <p class="mb-0 ml-1">XML Editor</p>
                    </div>
                    <textarea id="xml_editor" class="form-control font-weight-lighter" style="font-size: 12px;"
                              rows="15">
<?xml version="1.0" encoding="UTF-8"?>
<phonebooks>
   <phonebook>
      <contact>
         <category>0</category>
         <person>
            <realName>Person A</realName>
         </person>
         <telephony nid="1">
            <number type="mobile" prio="1" id="0">017611111</number>
         </telephony>
         <services />
         <setup />
         <features doorphone="0" />
         <mod_time>1535972380</mod_time>
         <uniqueid>227</uniqueid>
      </contact>
      <contact>
         <category>0</category>
         <person>
            <realName>Person B</realName>
         </person>
         <telephony nid="1">
            <number type="mobile" prio="1" id="0">0176222222</number>
         </telephony>
         <services />
         <setup />
         <features doorphone="0" />
         <mod_time>1535972450</mod_time>
         <uniqueid>229</uniqueid>
      </contact>
   </phonebook>
</phonebooks></textarea>
                </div>
            </div>
            <div class="col-md-6 col-sm-12">
                <div class="shadow p-3 mb-5 bg-white border border-lightgrey rounded">
                    <div class="d-flex">
                        <div class="mr-auto h3">CSV</div>
                        <div>
                            <button type="button" class="btn btn-outline-info btn-sm" onClick="download('csv')">
                                Download
                            </button>
                        </div>
                    </div>
                    <div class="dropdown-divider mt-2 mb-4"></div>
                    <div class="input-group mb-3">
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="file-input_csv"
                                   aria-describedby="inputGroupFileAddon01">
                            <label class="custom-file-label" for="file-input_csv">Choose CSV file</label>
                        </div>
                    </div>
                    <div class="d-flex mb-2" style="align-items: center;">
                        <label class="switch mb-0">
                            <input type="checkbox" checked id="csv_editor_switch">
                            <span class="slider round"></span>
                        </label>
                        <p class="mb-0 ml-1">CSV Editor</p>
                    </div>
                    <textarea class="form-control" class="form-control font-weight-lighter" style="font-size: 12px;" id="csv_editor" rows="15">
"Person C", "080333333"
"Person D", "080444444"</textarea>
                </div>
            </div>
        </div>
    </div>
</main>
<footer class="footer">
    <div class="container text-center">
        <p class="copyright text-muted small">
            <a href="https://github.com/MrNico96/fritzbox-converter">üë®üèº‚Äçüíª</a> This is a redesigned and updated version based on <a href="https://github.com/soerenj/fritzbox_phonebook_convert_xml_csv_vcf">Soerenj</a> Repository.
        </p>
    </div>
</footer>
</body>

<script src="js/custom.js"></script>
<script>
    document.getElementById('file-input_xml').addEventListener('change', readSingleFile, false);
    document.getElementById('file-input_csv').addEventListener('change', readSingleFile, false);

    document.getElementById('xml_editor_switch').addEventListener('change', expand_editor, false);
    document.getElementById('csv_editor_switch').addEventListener('change', expand_editor, false);

    function expand_editor(e) {
        let className = e.target.id.split("_switch")[0]
        document.getElementById(className).classList.toggle("d-none");
    }
</script>
</html>